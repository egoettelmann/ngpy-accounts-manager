{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowCFUpdate",
      "Effect": "Allow",
      "Action": [
        "cloudformation:DescribeStackEvents",
        "cloudformation:UpdateStack",
        "cloudformation:DescribeStackResource",
        "cloudformation:CreateChangeSet",
        "cloudformation:ExecuteChangeSet",
        "cloudformation:DescribeChangeSet",
        "cloudformation:GetTemplateSummary",
        "cloudformation:ListChangeSets",
        "cloudformation:DescribeStacks",
        "cloudformation:ListStackResources"
      ],
      "Resource": "arn:aws:cloudformation:${AWS_REGION}:${ACCOUNT_ID}:stack/NgPyAccountsManager/*"
    },
    {
      "Sid": "AllowS3Sync",
      "Effect": "Allow",
      "Action": [
        "s3:DeleteObject",
        "s3:GetBucketLocation",
        "s3:GetObject",
        "s3:ListBucket",
        "s3:PutObject"
      ],
      "Resource": "arn:aws:s3:::${WEB_BUCKET}/*"
    },
    {
      "Sid": "AllowRoute53Get",
      "Effect": "Allow",
      "Action": [
        "route53:GetHostedZone"
      ],
      "Resource": "arn:aws:route53:::hostedzone/${HOSTED_ZONE_ID}"
    },
    {
      "Sid": "AllowIamGet",
      "Effect": "Allow",
      "Action": [
        "iam:GetRole"
      ],
      "Resource": "arn:aws:iam::${ACCOUNT_ID}:role/NgPyAccountsManagerApiFunctionRole"
    },
    {
      "Sid": "AllowRdsGet",
      "Effect": "Allow",
      "Action": [
        "rds:DescribeDBClusters"
      ],
      "Resource": "arn:aws:rds:${AWS_REGION}:${ACCOUNT_ID}:cluster:ngpyaccountsmanager-rdscluster-*"
    },
    {
      "Sid": "AllowLambdaUpdate",
      "Effect": "Allow",
      "Action": [
        "lambda:UpdateFunctionCode"
      ],
      "Resource": "arn:aws:lambda:${AWS_REGION}:${ACCOUNT_ID}:function:NgPyAccountsManagerApiFunction"
    }
  ]
}
